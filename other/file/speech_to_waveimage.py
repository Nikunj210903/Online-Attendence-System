import matplotlib.pyplot as plt
from scipy.io import wavfile as wav
from PIL import Image
import numpy as np

def sigmoid (x):
    return 1/(1 + np.exp(-x))

rate, data1 = wav.read('input_audio/e.wav')
plt.plot(data1)
plt.gca().axes.get_yaxis().set_visible(False)
plt.gca().axes.get_xaxis().set_visible(False)
plt.savefig('output_image/plot1.png',dpi=200)

img1 = Image.open('output_image/plot1.png').convert('L')
height,width=img1.size
img1=img1.resize((int(height/100),int(width/100)))
height,width=img1.size
img1.save('output_image/plot11.png')
print("height:",height,"width:",width)
rawData = img1.load()
data1 = []
sum1=0
for y in range(width):
    sum1=0
    for x in range(height):
        sum1+=(rawData[x,y]/255)
    data1.append((sum1/height)*10000000000)



rate, data2 = wav.read('input_audio/s.wav')
plt.plot(data2)
plt.gca().axes.get_yaxis().set_visible(False)
plt.gca().axes.get_xaxis().set_visible(False)
plt.savefig('output_image/plot2.png',dpi=200)

img2 = Image.open('output_image/plot2.png').convert('L')
height,width=img2.size
img2=img2.resize((int(height/100),int(width/100)))
height,width=img1.size
print("height:",height,"width:",width)
img2.save('output_image/plot22.png')
rawData = img2.load()
data2 = []
sum1=0
for y in range(width):
    sum1=0
    for x in range(height):
        sum1+=rawData[x,y]/255
    data2.append((sum1/height)*10000000000)


data1_avg=0
for i in data1:
    data1_avg+=i
data1_avg/=len(data1)
print(data1_avg)
for i in range(len(data1)):
    data1[i]=sigmoid((data1[i]- data1_avg)/100000000)

data2_avg=0
for i in data2:
    data2_avg+=i
data2_avg/=len(data2)
print(data2_avg)
for i in range(len(data2)):
    data2[i]=sigmoid((data2[i]- data2_avg)/100000000)

print(data1)
print(data2)


data000=[-330.37419204015265, 88.763403948262, -6.095643586446924, 27.906913925498348, 0.6936501309283428, -5.273774274600396, -3.3342889246624656, -3.0308460730283935, -15.198239202823085, -7.781096664809914, -17.8003481093832, -11.79320028104273, -14.167264413676088, -14.720250182314217, -7.54990457138208, -11.78394501861479, -5.6954342607490975, -10.538914371849982, -6.282956238537643, -5.112260980184149, -6.889992430671103, -6.9387740757745195, -8.31366229941395, -4.812888583073986, -5.21132602726101, -3.2141160304974683, -4.7407983056911025, -5.102934030783065, -3.0801165520902005, -6.335186966853212, -3.231947492935564, -1.1720061663271533, -0.6944322025218478, -0.10483533213847561, -1.5633552112493534, -0.33160161749789996, 1.0596027970899862, -0.41180377663845263, 2.576134190325669, 4.379604567930446]
data001=[-312.865727501999, 119.72516986128112, -15.931020224644351, 6.179231741689032, 8.845241596007165, -7.271985578922629, -15.736512205495982, 4.039075219278857, -18.293858044622137, -14.540168090112552, -10.336753804226468, -17.408119786710525, -10.645706327161026, -12.212905859572329, -8.150829495796694, -10.747624742633395, -8.42923005358296, -10.768865507154441, -8.58083171012916, -7.7623513569025535, -9.931466772529046, -7.177055439066505, -8.748284675009252, -8.3255793346066, -6.17711631364342, -3.2369807503924863, -3.4244310653535814, -3.88702050439038, -3.2036072906021578, -2.4288377122819127, -3.8868028125545107, -2.4367473504613453, -0.6155976390794893, -2.5531455710260516, -1.6983233419777477, -0.8488059515215941, -2.0255031609820207, -2.547146760988881, -0.3340923514810647, -2.0059327224398107]
data010=[-313.18967233926475, 89.04312046789428, -9.818260139915031, 25.707946210640262, -3.5355258377923136, -5.676136522200667, -4.87278298024745, -5.503774659354447, -15.855868350794228, -5.656565462390758, -17.364878799516696, -11.352089932539174, -15.984496138869106, -13.352184898061198, -6.620873212099105, -14.904322750909389, -5.889812940127102, -11.866491738608467, -10.40497730186579, -7.929021675288953, -8.662411735755851, -8.829737297879205, -10.152047480806504, -5.956033740107751, -6.494118456531823, -2.712012778041403, -4.809660496091775, -5.328875428101416, -3.062001057594213, -7.343397360417096, -2.2754186357354773, -2.4723820643861485, -1.921121426309079, -0.3184627889789957, -1.6903428458432739, -0.06676932647450705, 0.6119680628115111, 2.1596890416538, 4.270092369801058, 4.600100845863437]
data011=[-304.0947211027797, 116.46457838308311, -14.686677071848152, 8.92845435775067, 8.649534012182945, -2.5987637049207364, -12.75185182161261, 3.1721674306247407, -16.325320794288565, -11.870439481788154, -6.316793403421764, -16.239353012762525, -9.341428522048101, -11.607204103194485, -9.549585096860651, -5.176164407001241, -7.523747106603516, -13.501366145232197, -7.172823479037312, -7.657203088851412, -9.964820035184616, -7.266069160009317, -9.031051342502353, -6.236238311574324, -7.562184461058974, -2.200796763351597, -2.5305145949134737, -4.035633921081474, -0.8306691868349816, -2.8260485326513587, -3.478099579139539, -2.211728081730069, 0.0045907824274080255, -1.8986511185425214, -2.206614298471743, -1.0290222859827505, -0.06575096031003137, -1.5257188043614658, -1.382615433063372, 0.17518558279357818]
data100=[-309.88653933079655, 95.85994929668767, -10.612182394046037, 27.985638900916285, 1.852157474882614, -6.800693011582605, -7.9111497992784034, -1.6897577433866422, -15.735330527466324, -5.515984273445655, -16.229975681516816, -14.13538215333168, -16.019186177962236, -14.022443136372381, -8.755613888126113, -12.283209181015428, -7.067140419605356, -12.429561883359288, -5.1112330697006465, -6.699810622848027, -9.358821109688009, -7.461571743730799, -11.201681364269485, -5.058577392125616, -7.316914183238848, -4.4131963760594575, -4.032872061049394, -5.420544852647595, -3.230378778018597, -6.437640068733606, -3.209290885967472, -1.8621619761751336, -1.0996743455319766, -1.1643380068446267, -1.7545771478662149, -0.14539042188737808, 0.5582788370932001, 0.9469099046579281, 2.7061048690051663, 3.716753659896863]
data101=[-285.4620925589424, 123.29195705560484, -29.889526309825126, 18.492661379278136, 14.351874226159056, -11.744483242847194, -18.046062614833847, 4.157403074704069, -16.153386150812732, -10.324588699437458, -8.914891784352772, -18.29122121775605, -8.211660588762278, -11.343716886466169, -16.124779454733343, -8.907646840567734, -5.872558731628928, -17.200364751929026, -5.391268558607851, -8.41225202281956, -14.158314717880026, -6.129098891622074, -9.97233710535633, -7.254119430434495, -9.753411990967612, -2.0864063747348243, -5.068277675539482, -8.717866536822786, -2.1649218940164126, -5.456778573965262, -2.9444173254068144, -1.9365841880684511, -1.151023139107849, -3.04506370705063, -1.8003171018310884, 0.5130816659884999, -1.9261534784724914, -3.194158934379685, -3.187295042292956, -3.1884317545147898]

data110=[-248.31270007468586, 93.80456489680004, -24.536839159194553, 25.46353125883463, -10.397258411955502, 0.10096870343537177, -20.48750155489336, -5.452347664879414, -12.595497366211292, -2.9538815487718124, -13.396289951255017, -12.141775314704022, -19.074637994368388, -17.693540956593893, -0.7829002396845932, -16.848185162129422, -6.180884610436423, -9.167867139419029, -8.267343496301443, -4.622858136614303, -11.481240190505044, -5.431923241796452, -6.433682343347647, -8.684262753884509, -9.862064769100828, -2.823619556785127, -6.008328325427237, -3.1650526463241944, -2.072944388809125, -8.341565904667137, -1.248163327080953, -6.357862360689698, -0.8513577065048309, 2.650791389093148, 0.7393507673158872, 6.419921582433774, 2.9723101457157823, 3.9262605927912846, 5.463073250870791, 2.5171251868096913]
data111=[-313.05721532863015, 125.88095043690126, -33.4812564942683, 21.63731887519549, 11.907648713426175, -13.601653989875883, -17.304587669540442, 5.212754115147885, -18.043616734350795, -8.02274931152007, -12.946224882092256, -17.987972636512634, -9.813065867007396, -13.563460502932083, -14.163987032993148, -8.070342293062309, -9.218660574271968, -13.777850195359552, -5.4112677135660645, -6.0287160926862295, -10.450230225766063, -7.339497895740209, -8.438377405768284, -9.418217774148468, -5.680942399603362, -2.6788103440241744, -4.794213630446175, -6.559346307476259, -3.8060393704192284, -1.8730988063854934, -4.289876059118068, -1.105137389960488, -1.4040238197166677, -1.138247900645758, -0.7063960248131578, -4.717457449331756, -2.281665276881052, -2.2359148982693107, -0.03666262802842587, 0.7872013659536019]
#for i in range(len(data00)):
 #   data00[i]=data00[i]/max1
  #  data01[i]=data01[i]/max2
   # data10[i]=data10[i]/max3
    #data11[i]=data11[i]/max4




data1=np.array([data000,data001,data010,data011,data100,data101])
data=sigmoid(data1)
print(data)
data_test1=np.array([data110,data111])
data_test=sigmoid(data_test1)
print(data.shape)
data.dump(open('output_image/data.npy','wb'))
data_test.dump(open('output_image/data_test.npy','wb'))       

